"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),Persistence=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"saveLists",value:function(t){if(!t)throw Error("lists parameter was not provided");localStorage.checklists=JSON.stringify(t)}},{key:"loadLists",value:function(){return JSON.parse(localStorage.checklists||"{}")}}]),t}(),_data={showMenu:!0,checklists:{h7F1oiV0:{title:"My List",items:[]}},listId:"h7F1oiV0",displayedList:{title:"Default List",items:[]}};Vue.component("navigation",{template:"#navigationTemplate",data:function(){return _data},watch:{showMenu:function(t){t&&this.loadLists()}},methods:{displayList:function(t){this.listId=t,this.showMenu=!1},loadLists:function(){return this.checklists=Persistence.loadLists()},saveLists:function(t){Persistence.saveLists(t),this.loadLists()},createChecklist:function(){var t=(new Date).getTime().toString(36),e=this.loadLists();e[t]={title:"New Checklist",items:[]},this.saveLists(e),this.displayList(t)},deleteChecklist:function(t){var e=this.loadLists();delete e[t],this.saveLists(e)}},created:function(){this.loadLists()}}),Vue.component("checklist",{template:"#checklistTemplate",data:function(){return _data},watch:{displayedList:{handler:function(){this.save()},deep:!0}},methods:{save:function(){var t=Persistence.loadLists();t[this.listId]=this.displayedList,Persistence.saveLists(t)},load:function(){var t=this.listId,e=Persistence.loadLists();this.displayedList=e[t]||{title:"Checklist not found",items:[]}},addItem:function(t){this.displayedList.items.push({text:t.target.value,complete:!1}),t.target.value=""},refocus:function(t){setTimeout(function(){return t.target.focus()},200)},defocus:function(t){document.activeElement.blur()},deleteItem:function(t){this.displayedList.items.splice(t,1),this.save()}},created:function(){this.load()}}),new Vue({el:"#routeManager",data:function(){return _data},watch:{showMenu:function(){this.updateState()}},methods:{updateState:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[{listId:this.listId,showMenu:this.showMenu},"",this.showMenu?"/":"?"+this.listId];if(t){var s;(s=history).replaceState.apply(s,e)}else{var i;(i=history).pushState.apply(i,e)}},popstate:function(t){var e=t.state;e?(this.showMenu=e.showMenu,this.listId=e.listId):this.showMenu=!0}},created:function(){var t=document.location.search.replace("?","");t?(this.showMenu=!1,this.listId=t,this.updateState(!0)):this.showMenu=!0,window.addEventListener("popstate",this.popstate.bind(this))}});